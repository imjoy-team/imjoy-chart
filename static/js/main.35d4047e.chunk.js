(this["webpackJsonpimjoy-chart-editor"]=this["webpackJsonpimjoy-chart-editor"]||[]).push([[0],{309:function(e,t,a){},982:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a(35),s=a.n(r),o=(a(309),a(103)),c=a(104),l=a(105),i=a(109),u=a(108),d=a(304),p=a(287),j=a(288),h=a.n(j),b=a(13),m=a.n(b),O=a(159),S=a.n(O),f=a(8),y=function(e){Object(i.a)(a,e);var t=Object(u.a)(a);function a(){return Object(o.a)(this,a),t.apply(this,arguments)}return Object(c.a)(a,[{key:"render",value:function(){var e=this.context.localize,t=this.props.logoSrc&&Object(f.jsx)(S.a,{src:this.props.logoSrc});return Object(f.jsxs)(b.PanelMenuWrapper,{menuPanelOrder:this.props.menuPanelOrder,children:[t||null,Object(f.jsx)(b.GraphCreatePanel,{group:e("Structure"),name:e("Traces")}),Object(f.jsx)(b.GraphSubplotsPanel,{group:e("Structure"),name:e("Subplots")}),this.hasTransforms()&&Object(f.jsx)(b.GraphTransformsPanel,{group:e("Structure"),name:e("Transforms")}),Object(f.jsx)(b.StyleLayoutPanel,{group:e("Style"),name:e("General")}),Object(f.jsx)(b.StyleTracesPanel,{group:e("Style"),name:e("Traces")}),this.hasAxes()&&Object(f.jsx)(b.StyleAxesPanel,{group:e("Style"),name:e("Axes")}),this.hasMaps()&&Object(f.jsx)(b.StyleMapsPanel,{group:e("Style"),name:e("Maps")}),this.hasLegend()&&Object(f.jsx)(b.StyleLegendPanel,{group:e("Style"),name:e("Legend")}),this.hasColorbars()&&Object(f.jsx)(b.StyleColorbarsPanel,{group:e("Style"),name:e("Color Bars")}),Object(f.jsx)(b.StyleNotesPanel,{group:e("Annotate"),name:e("Text")}),Object(f.jsx)(b.StyleShapesPanel,{group:e("Annotate"),name:e("Shapes")}),Object(f.jsx)(b.StyleImagesPanel,{group:e("Annotate"),name:e("Images")}),this.hasSliders()&&Object(f.jsx)(b.StyleSlidersPanel,{group:e("Control"),name:e("Sliders")}),this.hasMenus()&&Object(f.jsx)(b.StyleUpdateMenusPanel,{group:e("Control"),name:e("Menus")}),this.props.children?this.props.children:null,Object(f.jsx)(b.LayoutPanel,{group:"Metadata",name:"info",children:Object(f.jsx)(b.PlotlyFold,{name:"PlotlyFold",children:Object(f.jsxs)(b.Info,{attr:"title",children:[Object(f.jsx)("p",{children:"This custom editor demonstrates the general-purpose container and field components."}),Object(f.jsxs)("p",{children:["This is an ",Object(f.jsx)("code",{children:"Info"})," component."]})]})})}),this.props.loadCallback&&Object(f.jsx)(b.SingleSidebarItem,{children:Object(f.jsx)(b.Button,{variant:"primary",label:"load",onClick:this.props.loadCallback})}),this.props.saveCallback&&Object(f.jsx)(b.SingleSidebarItem,{children:Object(f.jsx)(b.Button,{variant:"primary",label:"save",onClick:this.props.saveCallback})})]})}}]),a}(b.DefaultEditor),g=(a(961),a(301)),x=a(302),v={editable:!0};function P(e){return new Promise((function(t,a){x.parse(e,{download:!0,header:!0,dynamicTyping:!0,skipEmptyLines:!0,error:function(e,t,n,r){alert("Falied to load the table: "+r.toString()),a(r)},complete:function(e){t(function(e){var t,a={},n=Object(p.a)(e);try{for(n.s();!(t=n.n()).done;)for(var r=t.value,s=0,o=Object.entries(r);s<o.length;s++){var c=Object(d.a)(o[s],2),l=c[0],i=c[1];a[l]=a[l]||[],a[l].push(i)}}catch(u){n.e(u)}finally{n.f()}return a}(e.data))}})}))}var C=function(e){Object(i.a)(a,e);var t=Object(u.a)(a);function a(){var e;Object(o.a)(this,a),e=t.call(this);var n=function(e){e=e.replace(/[\[]/,"\\[").replace(/[\]]/,"\\]");var t=new RegExp("[\\?&]"+e+"=([^&#]*)").exec(location.search);return null===t?"":decodeURIComponent(t[1].replace(/\+/g," "))}("load");if(n?P(n).then((function(t){e.dataSources=t,e.dataSourceOptions=Object.keys(e.dataSources).map((function(e){return{value:e,label:e}})),e.forceUpdate()})):(e.dataSources={col1:[1,2,3],col2:[4,3,2],col3:[17,13,9]},e.dataSourceOptions=Object.keys(e.dataSources).map((function(e){return{value:e,label:e}}))),e.state={data:[],layout:{},frames:[]},window.self!==window.top){var r=Object(l.a)(e);g.imjoyRPC.setupRPC({name:"ImJoy Chart Editor"}).then((function(e){e.export({setup:function(){console.log("imjoy-rpc initialized.")},run:function(e){e&&e.data&&(r.state=e.data||{data:[],layout:{},frames:[]},r.dataSources=e.data.data_sources||{},r.dataSourceOptions=e.data.data_sources_options||Object.keys(r.dataSources).map((function(e){return{value:e,label:e}})),r.state.data_sources&&delete r.data.data_sources,r.state.data_sources_options&&delete r.data.data_sources_options),r.forceUpdate()},setState:function(e){r.state=e,r.forceUpdate()},getState:function(){return r.state}})}))}return e}return Object(c.a)(a,[{key:"render",value:function(){var e=this;return Object(f.jsx)("div",{className:"app",children:Object(f.jsx)(m.a,{data:this.state.data,layout:this.state.layout,config:v,frames:this.state.frames,dataSources:this.dataSources,dataSourceOptions:this.dataSourceOptions,plotly:h.a,onUpdate:function(t,a,n){return e.setState({data:t,layout:a,frames:n})},useResizeHandler:!0,debug:!0,advancedTraceTypeSelector:!0,children:Object(f.jsx)(y,{logoSrc:"./static/icons/favicon-96x96.png",saveCallback:function(){console.log("saving...",e.state)}})})})}}]),a}(n.Component);s.a.render(Object(f.jsx)(C,{}),document.getElementById("root"))}},[[982,1,2]]]);
//# sourceMappingURL=main.35d4047e.chunk.js.map